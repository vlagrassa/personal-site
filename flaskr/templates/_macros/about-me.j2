{% from '_macros/utils.j2' import render_toggle_button_plus, loader %}
{% from '_macros/lang.j2'  import render_lang_object with context %}



{%- macro render_basic_info(key, value) %}
<dt class="text-end">{{ key }}</dt><dd class="mb-0">{{ value }}</dd>
{%- endmacro %}


{%- macro render_dropdown_panel(title, start_open=false) %}
{%- set dropdown_id = 'dropdown-panel-' + title.replace(' ', '-') %}
<div class="col-12">
  <div class="card double-outline title-bottom px-3 py-2 mt-3">
    <div class="position-relative">
      <h5 class="card-title mt-0">{{ title }}</h5>
      <div class="me-1" style="position: absolute; right: 0; bottom: -0.2em;">
        {{ render_toggle_button_plus('#' + dropdown_id, 'accordion', start_open) }}
      </div>
    </div>
    <div id="{{ dropdown_id }}"
      class="card-body p-0 row accordion-collapse collapse {% if start_open %}show{% endif %}"
      data-bs-parent="#dropdown-panel-container"
    >
      <div class="pt-1 pb-2">
        {{ caller() }}
      </div>
    </div>
  </div>
</div>
{%- endmacro %}


{%- macro render_qualification(title, source, date) %}
<dt class="text-start mb-1">{{ title }}</dt>
<dd class="text-end fst-italic">{{ source }} ({{ date }})</dd>
{%- endmacro %}


{%- macro render_language_entry(label, value) %}
<tr>
  <th>{{ label }}</th>
  <td>
    <span class="bar-chart-item" data-value="{{ value }}" aria-label="{{ value }}"></span>
  </td>
</tr>
{%- endmacro %}

{%- macro render_human_language_entry(language, level) %}
<div class="d-inline">{{ language }}&nbsp;<span class="text-body-secondary">({{ level }})</span></div>
{%- endmacro %}


{%- macro render_vis_choice(title, vis_id) %}
<div class="mt-3 col-3">
  <a class="vis-choice-button" data-vis-id="{{ vis_id }}" href="javascript:render_graph('{{ vis_id }}')" title='Graph my {{ title["en"] | lower }}'>
  <div class="card double-outline title-bottom px-1 py-2">
    <h5 class="card-title mt-0" style="font-size: 0.8rem;">
      {{ render_lang_object(title) }}
    </h5>
  </div>
  </a>
</div>
{%- endmacro %}


{%- macro render_big_number(element_id, label) %}
<div class="mt-3 col-4">
  <div class="card double-outline title-bottom px-2 py-2">
    <h5 class="card-title" style="line-height: 1em;"><small>{{ label }}</small></h5>
    <div class="card-body p-0 row">
      <span id="{{element_id}}" class="m-0 fs-4 font-mono" style="line-height: 1.4em; color: var(--color-secondary-3)">
        {{ loader() }}
      </span>
    </div>
  </div>
</div>
{%- endmacro %}



{%- macro render_help_button(section_id, title) %}
<li class="d-inline-block">
  <a id="help-button-{{ section_id }}"
    href="#"
    class="help-section-button collapsed"
    data-bs-toggle="collapse" data-bs-target="#help-section-{{ section_id }}"
  >{{ render_lang_object( title ) }}</a>
</li>
{%- endmacro %}

{%- macro render_help_section(section_id, title) %}
<div id="help-section-{{ section_id }}" class="help-section accordion-collapse collapse" data-bs-parent="#help-accordion">
  <div style="height: 1em"></div>
  <hr />
  <h3 class="fs-5 text-center">{{ render_lang_object(title) }}</h3>
  {{ caller () }}
  <hr />
</div>
{%- endmacro %}
